Usage: streamlit run [OPTIONS] TARGET [ARGS]...
Try 'streamlit run --help' for help.

Error: Invalid value: File does not exist: app_chatgpt.py

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:86
  Network URL: http://10.130.26.102:86
  External URL: http://103.146.247.152:86

  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:86
  Network URL: http://10.130.26.102:86
  External URL: http://103.146.247.152:86

  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:86
  Network URL: http://10.130.26.102:86
  External URL: http://103.146.247.152:86

2025-01-08 08:21:02.054 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 173, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 159, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 19, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:86
  Network URL: http://10.130.26.102:86
  External URL: http://103.146.247.152:86

2025-01-08 15:30:08.178 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 10, in <module>
    import matplotlib.pyplot as plt
ModuleNotFoundError: No module named 'matplotlib'
2025-01-08 15:46:05.228 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/2_streamlit.py", line 230, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 114, in write_response
    df = pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 239, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 232, in main
    st.error(f"Gagal memuat visualisasi diagram "+ e)
TypeError: can only concatenate str (not "ValueError") to str
2025-01-08 15:48:58.609 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/2_streamlit.py", line 231, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 107, in write_response
    df = pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 240, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 233, in main
    st.error(f"Gagal memuat visualisasi diagram "+ e)
TypeError: can only concatenate str (not "ValueError") to str
2025-01-08 15:50:12.483 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/2_streamlit.py", line 231, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 107, in write_response
    df = pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 240, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 233, in main
    st.error(f"Gagal memuat visualisasi diagram "+ e)
TypeError: can only concatenate str (not "ValueError") to str
2025-01-08 15:51:28.510 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/2_streamlit.py", line 231, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 114, in write_response
    df = pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 240, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 233, in main
    st.error(f"Gagal memuat visualisasi diagram "+ e)
TypeError: can only concatenate str (not "ValueError") to str
2025-01-08 15:53:55.618 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 238, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 199, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-08 15:55:20.480 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 238, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 231, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 107, in write_response
    df = pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length
2025-01-08 15:57:40.033 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 238, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 231, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 107, in write_response
    df = pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length
2025-01-08 15:59:11.536 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 238, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 199, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:86
  Network URL: http://10.130.26.102:86
  External URL: http://103.146.247.152:86

2025-01-09 10:51:26.653 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 10:56:47.955 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 257, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 121, in write_response
    df["size"] = df.luas_banjir / 10
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/generic.py", line 6299, in __getattr__
    return object.__getattribute__(self, name)
AttributeError: 'DataFrame' object has no attribute 'luas_banjir'
2025-01-09 10:58:06.950 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 10:58:46.943 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 257, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 126, in write_response
    point_layer = pydeck.Layer(
NameError: name 'pydeck' is not defined
2025-01-09 11:00:36.861 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 11:01:17.688 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 257, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 128, in write_response
    data=capitals,
NameError: name 'capitals' is not defined
2025-01-09 11:01:58.539 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 11:01:59.932 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 11:20:05.733 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 262, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:20:41.509 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 266, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 11:23:20.586 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 270, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 263, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:23:38.921 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 270, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 11:23:46.661 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 270, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 263, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:24:23.603 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 269, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 11:24:39.466 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 269, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 262, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:25:40.507 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 269, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 262, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:25:49.075 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 269, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 262, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:26:00.704 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 269, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 262, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:26:11.202 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 269, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 262, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:26:46.978 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 270, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 224, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 11:26:56.891 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 270, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 263, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:27:05.533 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 270, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 263, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:27:25.982 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 270, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 263, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:28:41.267 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 267, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 263, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:31:02.426 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 273, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 230, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 11:31:17.459 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 273, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 269, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 11:31:54.689 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 230, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
  Stopping...

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:86
  Network URL: http://10.130.26.102:86
  External URL: http://103.146.247.152:86

2025-01-09 12:06:56.879 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 12:09:41.257 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 12:09:43.757 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 13:01:00.799 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 268, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 13:01:04.635 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 268, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 13:01:17.279 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 262, in main
    response = ask_gpt4(prompt, context, model="gpt-4o-mini")
  File "/var/www/html/AI/2_streamlit.py", line 72, in ask_gpt4
    {"role": "user", "content": f"Berikut adalah konteks yang relevan:\n\n{context}\n\nPertanyaan: {question}. Jika data harus diambil dari URL: Berdasarkan informasi dari {URL}, jawabannya adalah {jawaban}."}
NameError: name 'URL' is not defined
2025-01-09 13:02:44.331 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 230, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 22, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 13:08:01.805 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 268, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 13:08:27.122 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 268, in main
    if response is not None:
UnboundLocalError: local variable 'response' referenced before assignment
2025-01-09 13:12:08.250 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 13:12:24.721 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 13:12:51.590 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 13:12:53.502 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 13:13:07.891 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 13:13:24.761 Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-01-09 15:17:11.573 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 229, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 21, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-09 17:07:07.200 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 229, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 21, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-10 09:46:06.467 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 257, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 123, in write_response
    df= pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length
2025-01-10 10:09:47.005 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/ops/array_ops.py", line 218, in _na_arithmetic_op
    result = func(left, right)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/computation/expressions.py", line 242, in evaluate
    return _evaluate(op, op_str, a, b)  # type: ignore[misc]
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/computation/expressions.py", line 73, in _evaluate_standard
    return op(a, b)
TypeError: unsupported operand type(s) for /: 'str' and 'int'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 257, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 124, in write_response
    df["size"] = df.iloc[:, 2] /10
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/ops/common.py", line 76, in new_method
    return method(self, other)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/arraylike.py", line 210, in __truediv__
    return self._arith_method(other, operator.truediv)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/series.py", line 6135, in _arith_method
    return base.IndexOpsMixin._arith_method(self, other, op)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/base.py", line 1382, in _arith_method
    result = ops.arithmetic_op(lvalues, rvalues, op)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/ops/array_ops.py", line 283, in arithmetic_op
    res_values = _na_arithmetic_op(left, right, op)  # type: ignore[arg-type]
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/ops/array_ops.py", line 227, in _na_arithmetic_op
    result = _masked_arith_op(left, right, op)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/ops/array_ops.py", line 182, in _masked_arith_op
    result[mask] = op(xrav[mask], y)
TypeError: unsupported operand type(s) for /: 'str' and 'int'
2025-01-10 10:10:34.666 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 256, in main
    decoded_response = decode_response(response)
  File "/var/www/html/AI/2_streamlit.py", line 90, in decode_response
    return json.loads(response)
  File "/usr/lib/python3.10/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.10/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.10/json/decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 112 (char 111)
2025-01-10 10:12:02.826 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 257, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 123, in write_response
    df= pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length
2025-01-10 10:12:22.046 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 272, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 257, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 123, in write_response
    df= pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length
2025-01-10 10:26:41.879 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 273, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 258, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 123, in write_response
    df= pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length
2025-01-10 10:31:34.347 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 273, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 258, in main
    write_response(decoded_response)
  File "/var/www/html/AI/2_streamlit.py", line 123, in write_response
    df= pd.DataFrame(data)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/frame.py", line 778, in __init__
    mgr = dict_to_mgr(data, index, columns, dtype=dtype, copy=copy, typ=manager)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 503, in dict_to_mgr
    return arrays_to_mgr(arrays, columns, index, dtype=dtype, typ=typ, consolidate=copy)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 114, in arrays_to_mgr
    index = _extract_index(arrays)
  File "/var/www/html/AI/lib/python3.10/site-packages/pandas/core/internals/construction.py", line 677, in _extract_index
    raise ValueError("All arrays must be of the same length")
ValueError: All arrays must be of the same length
2025-01-10 10:39:08.871 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 271, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 255, in main
    decoded_response = decode_response(response)
  File "/var/www/html/AI/2_streamlit.py", line 90, in decode_response
    return json.loads(response)
  File "/usr/lib/python3.10/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.10/json/decoder.py", line 340, in decode
    raise JSONDecodeError("Extra data", s, end)
json.decoder.JSONDecodeError: Extra data: line 1 column 974 (char 973)
2025-01-10 11:28:44.297 Session with id 4e636f00-7356-4c9d-9510-f3d0fd15d9de is already connected! Connecting to a new session.
2025-01-10 12:21:11.526 Uncaught app execution
Traceback (most recent call last):
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/exec_code.py", line 88, in exec_func_with_error_handling
    result = func()
  File "/var/www/html/AI/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py", line 579, in code_to_exec
    exec(code, module.__dict__)
  File "/var/www/html/AI/2_streamlit.py", line 271, in <module>
    main()
  File "/var/www/html/AI/2_streamlit.py", line 229, in main
    relevant_texts = search_multiple_indices(prompt, index_dir)
  File "/var/www/html/AI/2_streamlit.py", line 21, in search_multiple_indices
    response = openai.Embedding.create(input=[query], model=model)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/embedding.py", line 33, in create
    response = super().create(*args, **kwargs)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 298, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 700, in _interpret_response
    self._interpret_response_line(
  File "/var/www/html/AI/lib/python3.10/site-packages/openai/api_requestor.py", line 765, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: '$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.
2025-01-10 12:21:28.483 Session with id 65278580-ce49-4921-97de-55555a0f549d is already connected! Connecting to a new session.
